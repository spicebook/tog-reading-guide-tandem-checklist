<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Tandem Checklist — SpiceBook</title>

<!-- EB Garamond -->
<link href="https://fonts.googleapis.com/css2?family=EB+Garamond:wght@400;600;700&display=swap" rel="stylesheet">

<style>
  :root{
    --bg: #FED5D3;
    --accent-eos: #C2052B;
    --accent-tod: #FD9683;
    --white: #ffffff;
    --text: #222222;
  }

  html,body{
    height:100%;
    margin:0;
    background:var(--bg);
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    color:var(--text);
  }

  header{
    padding:20px 12px 6px;
    text-align:center;
    font-family:"EB Garamond", serif;
    font-size:28px;
    font-weight:700;
    -webkit-text-stroke:0.5px var(--accent-eos);
    text-stroke:0.5px var(--accent-eos);
    color: var(--accent-eos);
  }

  .subtitle{
    text-align:center;
    font-size:15px;
    max-width:88%;
    margin:0 auto 16px;
    line-height:1.45;
    padding:0 8px;
    color: var(--accent-eos); /* subtitle matches header accent */
  }

  /* Progress area */
  .progress-wrap{
    width:92%;
    margin: 8px auto 12px;
    text-align:center;
  }

  #progress-text{
    font-weight:700;
    margin-bottom:8px;
    font-size:14px;
    color: rgba(0,0,0,0.8);
  }

  #progress-container{
    height:18px;
    width:100%;
    border-radius:10px;
    background:var(--white);
    border:2px solid var(--accent-eos);
    overflow:hidden;
  }

  #progress-bar{
    height:100%;
    width:0%;
    background:var(--accent-eos);
    transition: width 300ms ease;
  }

  /* Clear button */
  #clearButton{
    display:block;
    margin:12px auto;
    padding:10px 14px;
    background:var(--accent-eos);
    color:white;
    border:none;
    border-radius:10px;
    font-weight:700;
    font-size:15px;
    cursor:pointer;
    box-shadow:0 4px 10px rgba(0,0,0,0.12);
  }
  #clearButton:hover{ opacity:0.92 }

  /* List */
  #list{ padding:8px; padding-bottom:120px } /* bottom padding so floating button doesn't overlap items */

  .chapter{
    display:flex;
    align-items:center;
    gap:12px;
    padding:12px 14px;
    margin:10px 8px;
    border-radius:10px;
    border:2px solid #eee;
    background:var(--white); /* solid white card */
    font-size:16px;
    line-height:1.2;
    color: var(--text);
    box-shadow: 0 2px 6px rgba(0,0,0,0.04);
  }

  /* Border color only on wrapper; keep text color controlled separately */
  .chapter.eos{ border-color: var(--accent-eos); }
  .chapter.tod{ border-color: var(--accent-tod); }

  /* Checkbox - white background; border/X color explicitly set per wrapper */
  input[type="checkbox"]{
    appearance:none;
    -webkit-appearance:none;
    width:28px;
    height:28px;
    border-radius:6px;
    margin:0;
    padding:0;
    display:flex;
    align-items:center;
    justify-content:center;
    cursor:pointer;
    background:var(--white); /* always white */
    box-sizing: border-box;
    flex: 0 0 28px;
    border: 2px solid #999; /* fallback */
  }

  /* Default invisible X */
  input[type="checkbox"]::after{
    content:"";
    opacity:0;
    font-size:18px;
    font-weight:700;
    line-height:1;
    color: currentColor;
    transition: opacity 120ms ease;
  }

  input[type="checkbox"]:checked::after{
    content:"✕";
    opacity:1;
  }

  /* Crucial: explicitly set checkbox border & X color for each wrapper to avoid inheriting wrong color */
  .chapter.eos input[type="checkbox"]{
    border-color: var(--accent-eos);
    color: var(--accent-eos);
  }
  .chapter.eos input[type="checkbox"]::after{
    color: var(--accent-eos);
  }

  .chapter.tod input[type="checkbox"]{
    border-color: var(--accent-tod);
    color: var(--accent-tod);
  }
  .chapter.tod input[type="checkbox"]::after{
    color: var(--accent-tod);
  }

  /* TEXT COLOR: set chapter label color per book (what you wanted) */
  .chapter.eos .chapter-text{ color: var(--accent-eos); font-weight:600; }
  .chapter.tod .chapter-text{ color: var(--accent-tod); font-weight:600; }

  /* label text styling (general) */
  .chapter-text{
    flex:1;
    font-size:16px;
    user-select: none;
  }

  /* floating back button */
  #backButton{
    position: fixed;
    bottom: 18px;
    right: 16px;
    background: var(--accent-eos);
    color:white;
    padding: 10px 14px;
    border-radius: 28px;
    font-weight:700;
    text-decoration:none;
    z-index: 999;
    box-shadow: 0 6px 18px rgba(0,0,0,0.18);
  }

  #backButton:active{ transform: translateY(1px) }

  footer{
    text-align:center;
    padding:26px 6px 36px;
    color: rgba(0,0,0,0.6);
    font-size:13px;
  }

  /* small responsive tweak */
  @media (max-width:420px){
    header{font-size:24px}
    input[type="checkbox"]{ width:26px;height:26px }
    .chapter{ font-size:15px }
  }
</style>
</head>
<body>

<header>Empire of Storms / Tower of Dawn Tandem Checklist</header>

<div class="subtitle">
  Use this checklist when your reading order brings you to <em>Empire of Storms</em> and <em>Tower of Dawn</em>.
  These two books happen at the same time, so alternating the chapters lets you read the timeline in proper chronological order.
</div>

<!-- progress -->
<div class="progress-wrap" aria-hidden="false">
  <div id="progress-text">0% completed</div>
  <div id="progress-container"><div id="progress-bar"></div></div>
</div>

<!-- clear -->
<button id="clearButton" aria-label="Clear all progress">Clear All Progress</button>

<!-- checklist -->
<div id="list" role="list" aria-label="Tandem checklist"></div>

<!-- floating back -->
<a id="backButton" href="reading-order.html">← Back to Reading Order</a>

<footer>© SpiceBook</footer>

<script>
/* Chapter data */
const chapters = [
"Empire of Storms – Nightfall",
"Empire of Storms – Ch 1",
"Empire of Storms – Ch 2",
"Empire of Storms – Ch 3",
"Empire of Storms – Ch 4",
"Empire of Storms – Ch 5",
"Tower of Dawn – Ch 1",
"Empire of Storms – Ch 6",
"Empire of Storms – Ch 7",
"Empire of Storms – Ch 8",
"Tower of Dawn – Ch 2",
"Tower of Dawn – Ch 3",
"Empire of Storms – Ch 9",
"Empire of Storms – Ch 10",
"Tower of Dawn – Ch 4",
"Tower of Dawn – Ch 5",
"Tower of Dawn – Ch 6",
"Empire of Storms – Ch 11",
"Tower of Dawn – Ch 7",
"Empire of Storms – Ch 12",
"Empire of Storms – Ch 13",
"Tower of Dawn – Ch 8",
"Tower of Dawn – Ch 9",
"Tower of Dawn – Ch 10",
"Empire of Storms – Ch 14",
"Empire of Storms – Ch 15",
"Empire of Storms – Ch 16",
"Tower of Dawn – Ch 11",
"Tower of Dawn – Ch 12",
"Empire of Storms – Ch 17",
"Empire of Storms – Ch 18",
"Tower of Dawn – Ch 13",
"Tower of Dawn – Ch 14",
"Tower of Dawn – Ch 15",
"Tower of Dawn – Ch 16",
"Empire of Storms – Ch 19",
"Tower of Dawn – Ch 17",
"Empire of Storms – Ch 20",
"Empire of Storms – Ch 21",
"Empire of Storms – Ch 22",
"Empire of Storms – Ch 23",
"Tower of Dawn – Ch 18",
"Tower of Dawn – Ch 19",
"Tower of Dawn – Ch 20",
"Tower of Dawn – Ch 21",
"Empire of Storms – Ch 24",
"Empire of Storms – Ch 25",
"Tower of Dawn – Ch 22",
"Tower of Dawn – Ch 23",
"Empire of Storms – Ch 26",
"Tower of Dawn – Ch 24",
"Empire of Storms – Ch 27",
"Empire of Storms – Ch 28",
"Empire of Storms – Ch 29",
"Tower of Dawn – Ch 25",
"Tower of Dawn – Ch 26",
"Tower of Dawn – Ch 27",
"Tower of Dawn – Ch 28",
"Empire of Storms – Ch 30",
"Tower of Dawn – Ch 29",
"Tower of Dawn – Ch 30",
"Tower of Dawn – Ch 31",
"Empire of Storms – Ch 31",
"Tower of Dawn – Ch 32",
"Empire of Storms – Ch 32",
"Tower of Dawn – Ch 33",
"Tower of Dawn – Ch 34",
"Tower of Dawn – Ch 35",
"Empire of Storms – Ch 33",
"Empire of Storms – Ch 34",
"Empire of Storms – Ch 35",
"Empire of Storms – Ch 36",
"Empire of Storms – Ch 37",
"Empire of Storms – Ch 38",
"Empire of Storms – Ch 39",
"Empire of Storms – Ch 40",
"Empire of Storms – Ch 41",
"Empire of Storms – Ch 42",
"Empire of Storms – Ch 43",
"Empire of Storms – Ch 44",
"Empire of Storms – Ch 45",
"Empire of Storms – Ch 46",
"Empire of Storms – Ch 47",
"Empire of Storms – Ch 48",
"Empire of Storms – Ch 49",
"Empire of Storms – Ch 50",
"Empire of Storms – Ch 51",
"Tower of Dawn – Ch 36",
"Tower of Dawn – Ch 37",
"Empire of Storms – Ch 52",
"Tower of Dawn – Ch 38",
"Tower of Dawn – Ch 39",
"Tower of Dawn – Ch 40",
"Empire of Storms – Ch 53",
"Tower of Dawn – Ch 41",
"Tower of Dawn – Ch 42",
"Empire of Storms – Ch 54",
"Empire of Storms – Ch 55",
"Empire of Storms – Ch 56",
"Tower of Dawn – Ch 43",
"Empire of Storms – Ch 57",
"Empire of Storms – Ch 58",
"Empire of Storms – Ch 59",
"Tower of Dawn – Ch 44",
"Tower of Dawn – Ch 45",
"Tower of Dawn – Ch 46",
"Tower of Dawn – Ch 47",
"Tower of Dawn – Ch 48",
"Empire of Storms – Ch 60",
"Empire of Storms – Ch 61",
"Tower of Dawn – Ch 49",
"Tower of Dawn – Ch 50",
"Tower of Dawn – Ch 51",
"Empire of Storms – Ch 62",
"Empire of Storms – Ch 63",
"Tower of Dawn – Ch 52",
"Tower of Dawn – Ch 53",
"Empire of Storms – Ch 64",
"Empire of Storms – Ch 65",
"Tower of Dawn – Ch 54",
"Tower of Dawn – Ch 55",
"Tower of Dawn – Ch 56",
"Empire of Storms – Ch 66",
"Empire of Storms – Ch 67",
"Tower of Dawn – Ch 57",
"Empire of Storms – Ch 68",
"Empire of Storms – Ch 69",
"Empire of Storms – Ch 70",
"Empire of Storms – Ch 71",
"Empire of Storms – Ch 72",
"Empire of Storms – Ch 73",
"Empire of Storms – Ch 74",
"Empire of Storms – Ch 75",
"Tower of Dawn – Ch 58",
"Tower of Dawn – Ch 59",
"Tower of Dawn – Ch 60",
"Tower of Dawn – Ch 61",
"Tower of Dawn – Ch 62",
"Tower of Dawn – Ch 63",
"Tower of Dawn – Ch 64",
"Tower of Dawn – Ch 65",
"Tower of Dawn – Ch 66",
"Tower of Dawn – Ch 67",
"Tower of Dawn – Ch 68",
"Tower of Dawn – Fireheart"
];

/* localStorage key prefix */
const KEY_PREFIX = 'spicebook_tandem_ch_';

const listEl = document.getElementById('list');
const progressBar = document.getElementById('progress-bar');
const progressText = document.getElementById('progress-text');
const clearButton = document.getElementById('clearButton');

const total = chapters.length;

function isToD(label){ return label.toLowerCase().startsWith('tower of dawn'); }
function isEoS(label){ return label.toLowerCase().startsWith('empire of storms'); }

function loadProgressIndex(i){
  return localStorage.getItem(KEY_PREFIX + i) === '1';
}
function saveProgressIndex(i, val){
  try{ localStorage.setItem(KEY_PREFIX + i, val ? '1' : '0'); }catch(e){}
}

function renderList(){
  listEl.innerHTML = '';
  chapters.forEach((label, i) => {
    const wrapper = document.createElement('label');
    wrapper.className = 'chapter ' + (isEoS(label) ? 'eos' : 'tod');

    const cb = document.createElement('input');
    cb.type = 'checkbox';
    cb.setAttribute('aria-label', label);

    // restore state
    if(loadProgressIndex(i)) cb.checked = true;

    cb.addEventListener('change', () => {
      saveProgressIndex(i, cb.checked);
      updateProgress();
    });

    const text = document.createElement('div');
    text.className = 'chapter-text';
    text.textContent = label;

    wrapper.appendChild(cb);
    wrapper.appendChild(text);
    listEl.appendChild(wrapper);
  });
}

function updateProgress(){
  let checked = 0;
  for(let i=0;i<total;i++){
    if(loadProgressIndex(i)) checked++;
  }
  const pct = Math.round((checked/total)*100);
  const bar = document.getElementById('progress-bar');
  if(bar) bar.style.width = pct + '%';
  progressText.textContent = pct + '% completed';
}

/* clear all */
clearButton.addEventListener('click', ()=>{
  if(!confirm('Clear all saved progress? This cannot be undone.')) return;
  for(let i=0;i<total;i++) localStorage.removeItem(KEY_PREFIX + i);
  renderList();
  updateProgress();
});

/* init */
renderList();
updateProgress();
</script>
</body>
</html>
